# Exporting R Objects

## Writing out census datasets as CSV files 

### Write out multiple census datasets stored a list to disk (in CSV format)

```{r}
population_rural_2000_2010_list_cleaned
```

```{r}
writeout_function<-function(object, filename){
  setwd("/Users/adra7980/Documents/git_repositories/R_census/exported_objects/exported_datasets")
  filename<-paste0(filename, ".csv")
  write_csv(object, filename)
}

walk2(population_rural_2000_2010_list_cleaned, names(population_rural_2000_2010_list_cleaned), 
     writeout_function)
```


### Write out multiple census datasets stored as separate objects to disk (in CSV format)

```{r}
state_total_2010<-get_decennial(geography="state", 
                                variables = "P001001",
                                year = 2010)

state_rural_2010<-get_decennial(geography = "state", 
                                variables = "P002005",
                                 year = 2010)

```


```{r}
# put objects to export in a named list
objects_to_export<-lst(state_total_2010, state_rural_2010)

walk2(objects_to_export, names(objects_to_export), writeout_function)
```


## Writing out other objects (i.e. maps, visualizations etc.) to disk

### Using plot devices to write out multiple maps to a single file

```{r}
pdf("/Users/adra7980/Documents/git_repositories/R_census/exported_objects/visualizations/age_maps.pdf")
county_age_maps_list
dev.off()
```

### writing out multiple maps (PNG)

```{r}
map_to_write_png<-function(map_object, map_name){
  path<-"/Users/adra7980/Documents/git_repositories/R_census/exported_objects/visualizations/"
  filename<-paste0(path, map_name, "_age_map", ".png" )
  tmap_save(map_object, filename)
}

map2(.x=county_age_maps_list, names(county_age_maps_list), .f=map_to_write_png)
```

### writing out multiple maps (PDF)

```{r}
map_to_write_pdf<-function(map_object, map_name){
  path<-"/Users/adra7980/Documents/git_repositories/R_census/exported_objects/visualizations/"
  filename<-paste0(path, map_name, "_age_map", ".pdf" )
  tmap_save(map_object, filename)
}

map2(.x=county_age_maps_list, names(county_age_maps_list), .f=map_to_write_pdf)
```


### generalizing function

```{r}
map_to_write<-function(map_object, map_name, extension){
  path<-"/Users/adra7980/Documents/git_repositories/R_census/exported_objects/visualizations/"
  filename<-paste0(path, map_name, extension)
  tmap_save(map_object, filename)
}

# inputlist
inputlist<-list(county_age_maps_list, names(county_age_maps_list), ".png")

# writes png files
pmap(inputlist, map_to_write)

# inputlist
inputlist<-list(county_age_maps_list, names(county_age_maps_list), ".jpeg")

# writes jpeg files
pmap(inputlist, map_to_write)

```


Use pdf viewer to write out multiple visualizations to a single pdf
```{r}
pdf("/Users/adra7980/Documents/git_repositories/R_census/exported_objects/visualizations/age_viz.pdf")
county_age_graphs_list
dev.off()
```

Write out ggplot visualizations as separate png files 
```{r}
# separate pngs
plot_save<-function(plot, filename){
  setwd("/Users/adra7980/Documents/git_repositories/R_census/exported_objects/visualizations")
  filename_string<-paste0(filename, ".png")
  png(filename_string)
  print(plot)
  dev.off()
}


walk2(county_age_graphs_list, names(county_age_graphs_list), plot_save)

```


Write out ggplot visualizations as separate pdf files 

```{r}
# separate pdfs 
plot_save<-function(plot, filename){
  setwd("/Users/adra7980/Documents/git_repositories/R_census/exported_objects/visualizations")
  filename_string<-paste0(filename, ".pdf")
  pdf(filename_string)
  print(plot)
  dev.off()
}

walk2(county_age_graphs_list, names(county_age_graphs_list), plot_save)
```


```{r}
plot_save_general<-function(plot, filename, extension){
  setwd("/Users/adra7980/Documents/git_repositories/R_census/exported_objects/visualizations")
  filename_string<-paste0(filename, extension)
  if(extension==".pdf"){
    pdf(filename_string)
  } else {
    if (extension==".png"){
      png(filename_string)
    } else {
      if (extension==".jpeg"){
        jpeg(filename_string)
      }
    }
  }
print(plot)
dev.off()
}

inputlist<-list(county_age_graphs_list, names(county_age_maps_list), ".jpeg")
pmap(inputlist, plot_save_general)

```











